<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySchedule</title>
    <link rel="stylesheet" href="style.css">

    <script>
        // displays the big picture on mouseover of the 1st 
        // paragraph element "A paragraph with a picture" in the body below
          function showBigPic(num) {
              bigpic = document.getElementById("big");
              if (parseInt(num) == 1) {
                bigpic.src = "images/MondayNightfb.jpg";
                bigpic.alt = "Monday Night football";
              }
              else if (parseInt(num) == 2) {
                bigpic.src = "images/FolwellHall.jfif";
                bigpic.alt = "Spanish";
              }
              else if (parseInt(num) == 3) {
                bigpic.src = "images/BlazePizza.jpg";
                bigpic.alt = "Blaze Pizza";
              }
              else if (parseInt(num) == 4) {
                bigpic.src = "images/RecWell.jpg";
                bigpic.alt = "RecWell";
              }
              else if (parseInt(num) == 5) {
                bigpic.src = "images/Wahu.jpg";
                bigpic.alt = "Wahu";
              }
              else if (parseInt(num) == 6) {
                bigpic.src = "images/Caribou.jpg";
                bigpic.alt = "Caribou Coffee";
              }
              else if (parseInt(num) == 7) {
                bigpic.src = "images/HellsKitchen.jpg";
                bigpic.alt = "Hells Kitchen";
              }
              else if (parseInt(num) == 8) {
                bigpic.src = "images/LifetimeFitness.jpg";
                bigpic.alt = "Life Time";
              }
          }    



          // transition for images with button 



        function changeImage(event){
            var myimg = document.getElementById("big");
            var btn = document.getElementById('logoButton');
            myimg.classList.toggle('fade');
            if (btn.innerText == "Hide"){
                btn.innerText = "Show";
            }
            else{
                btn.innerText = "Hide";
            }
        }



        //   stuff for map 

        var map;
        var directionsService;
        var directionsRenderer;
        var currentLocation;


        function initMap() {

            // creating points of interest

            // Select all rows of the Schedule table
            const rows = document.querySelectorAll('#schedule-table tbody tr');

            // instantiating map

            var myLatLng = {lat: 44.977276, lng: -93.232266};
            map = new google.maps.Map(document.getElementById('map'), {
            center: myLatLng,
            zoom: 14
            });


            // Create an object to store the markers by latitude/longitude
            const markers = {};



            // Loop through each row and extract the event information
            rows.forEach(row => {
                const name = row.querySelector('.event-name').innerText;
                const time = row.querySelector('.event-time').innerText;
                const location = row.querySelector('.event-location').innerText;

                // Use the Places API to geocode the location and obtain the latitude and longitude
                const service = new google.maps.places.PlacesService(map);
                service.textSearch({ query: location }, (results, status) => {
                    if (status === google.maps.places.PlacesServiceStatus.OK) {
                    const place = results[0];
                    const latLng = place.geometry.location;

                    // Create a custom marker for each unique latitude/longitude pair
                    const markerKey = `${latLng.lat()},${latLng.lng()}`;
                    if (!markers[markerKey]) {
                        const marker = new google.maps.Marker({
                        position: latLng,
                        map: map,
                        title: name + ' - ' + time
                        });

                        // Add a click listener to display the complete address of the event
                        const infowindow = new google.maps.InfoWindow({
                        content: place.formatted_address
                        });
                        marker.addListener('click', () => {
                        infowindow.open(map, marker);
                        });

                        // Store the marker in the markers object for later use
                        markers[markerKey] = marker;
                    }
                    }
                });
                });

            var geocoder = new google.maps.Geocoder(); // Create a geocoder object

            // Create the DirectionsService and DirectionsRenderer objects

            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer();
            directionsRenderer.setMap(map);

        }



        function calculateRoute() {
            var selectedMode = document.getElementById('mode').value;
            var destination = document.getElementById('destination').value;

            // Get the user's current location using the geolocation API
            navigator.geolocation.getCurrentPosition(function(position) {
                var currentLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

                // Calculate the route using the DirectionsService
                var request = {
                origin: currentLocation,
                destination: destination,
                travelMode: google.maps.TravelMode[selectedMode]
                };
                directionsService.route(request, function(result, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    // Display the route on the map using the DirectionsRenderer
                    directionsRenderer.setDirections(result);
                }
                });
            });
            }



      </script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKV_ZWS2vXsELohIbIxE_Liqf0msc0W2U&libraries=places&callback=initMap" async defer></script>



</head>

<body>


    <header>
        <nav>
          <ul class="navbar">
            <li class="navbarli"><a href="AboutMe.html">About Me</a></li>
            <li class="navbarli"><a href="MySchedule.html">Schedule</a></li>
            <li class="navbarli"><a href="MyForm.html">Form</a></li>
          </ul>
        </nav>
      </header>


    <div>
        <h1 class="title"> My Schedule</h1>
    </div>

    <div class="wrapper">
        <table id="schedule-table">
            <tr>
                <th>Day</th>
                <th>Event</th>
                <th>Time</th>
                <th>Location</th>
                <th>Phone Number</th>
                <th>URL</th>
            </tr>
            <tr onmouseover="showBigPic(1)">
                <td>Monday</td>
                <td class="event-name">Watch Football with roommate</td>
                <td class="event-time">7:00 PM - 9:00 PM</td>
                <td class="event-location">1016 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/MondayNightfb.jpg" alt="Monday Night football">
                </td>
                <td>612-984-1048</td>
                <td><a href="https://www.nfl.com/schedules/monday-night-football/">Monday Night Football</a></td>
            </tr>
            <tr onmouseover="showBigPic(2)">
                <td>Tuesday</td>
                <td class="event-name">Spanish Class</td>
                <td class="event-time">4:00 PM - 5:15 PM</td>
                <td class="event-location">Folwell Hall, Pleasant St SE, Minneapolis, MN 55455
                    <img src="images/FolwellHall.jfif" alt="Spanish">
                </td>
                <td>612-984-1048</td>
                <td><a href="https://cla.umn.edu/spanish-portuguese">Spanish UMN</a></td>
            </tr>
            <tr onmouseover="showBigPic(3)">
                <td>Wednesday</td>
                <td class="event-name">Dinner with friend at pizza place</td>
                <td class="event-time">6:00 PM - 7:15 PM</td>
                <td class="event-location">1000 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/BlazePizza.jpg" alt="Blaze Pizza">
                </td>
                <td>(612) 295-0835</td>
                <td><a href="https://www.blazepizza.com/?utm_source=gmb&utm_medium=yext">Blaze Pizza</a></td>
            </tr>
            <tr onmouseover="showBigPic(4)">
                <td>Thursday</td>
                <td class="event-name">Workout at the Rec</td>
                <td class="event-time">6:00 PM - 7:30 PM</td>
                <td class="event-location">123 SE Harvard St, Minneapolis, MN 55455
                    <img src="images/RecWell.jpg" alt="RecWell">
                </td>
                <td>(612) 626-9222</td>
                <td><a href="https://recwell.umn.edu/">RecWell</a></td>
            </tr>
            <tr onmouseover="showBigPic(5)">
                <td>Friday</td>
                <td class="event-name">Party with friends at my Apartment</td>
                <td class="event-time">8:00 PM - 12:00 AM</td>
                <td class="event-location">1016 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/Wahu.jpg" alt="Wahu">
                </td>
                <td>(952) 208-9101</td>
                <td><a href="https://www.liveatwahu.com/?y_source=1_MTMxMDg4MjEtNzE1LWxvY2F0aW9uLndlYnNpdGU%3D">Wahu</a></td>
            </tr>
            <tr onmouseover="showBigPic(6)">
                <td>Saturday</td>
                <td class="event-name">Coffee and Breakfast with friends at Caribou</td>
                <td class="event-time">10:00 AM - 11:00 AM</td>
                <td class="event-location">917 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/Caribou.jpg" alt="Caribou Coffee">
                </td>
                <td>(612) 331-4121</td>
                <td><a href="https://locations.cariboucoffee.com/us/mn/minneapolis/917-washington-avenue-se">Caribou Coffee</a></td>
            </tr>
            <tr onmouseover="showBigPic(7)">
                <td>Saturday</td>
                <td class="event-name">Dinner with Dad at Hell's Kitchen</td>
                <td class="event-time">6:00 PM - 7:00 PM</td>
                <td class="event-location">80 S 9th St, Minneapolis, MN 55402
                    <img src="images/HellsKitchen.jpg" alt="Hells Kitchen">
                </td>
                <td>(612) 332-4700</td>
                <td><a href="https://www.hellskitcheninc.com/">Hell's Kitchen</a></td>
            </tr>
            <tr onmouseover="showBigPic(8)">
                <td>Sunday</td>
                <td class="event-name">Workout and dinner with Mom at Life Time</td>
                <td class="event-time">5:30 PM - 8:30 PM</td>
                <td class="event-location">3600 Plymouth Blvd, Plymouth, MN 55446
                    <img src="images/LifetimeFitness.jpg" alt="Life Time">
                </td>
                <td>763-509-0909</td>
                <td><a href="https://my.lifetime.life/clubs/mn/plymouth/services/lifecafe/menu.html">Life Time menu</a></td>
            </tr>
        </table>

        <div id="big-images">
            <button onclick="changeImage()" id="logoButton">Hide</button>
            <img src="images/gophers-mascot.png" alt="" id="big" >
        </div>
    </div>

            <!-- map -->

        <div id="map"></div>
       
        <label for="destination">Destination:</label>
        <select id="destination">
            <option value="">Select a destination</option>
            <option value="917 Washington Ave SE, Minneapolis, MN 55414">Caribou</option>
            <option value="80 S 9th St, Minneapolis, MN 55402">Hell's Kitchen</option>
            <option value="1000 Washington Ave SE, Minneapolis, MN 55414">Blaze Pizza</option>
            <option value="1016 Washington Ave SE, Minneapolis, MN 55414">Wahu</option>
            <option value="Folwell Hall, Pleasant St SE, Minneapolis, MN 55455">Folwell</option>
        </select>
        <label for="mode">Mode of transportation:</label>
        <select id="mode">
            <option value="DRIVING">Driving</option>
            <option value="WALKING">Walking</option>
            <option value="TRANSIT">Public Transit</option>
        </select>
        <!-- <br> -->
        
        <button onclick="calculateRoute()">Go</button>
        
            
    
</body>
</html>