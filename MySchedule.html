<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySchedule</title>
    <link rel="stylesheet" href="style.css">

    <script>
        // displays the big picture on mouseover of the 1st 
        // paragraph element "A paragraph with a picture" in the body below
          function showBigPic(num) {
              bigpic = document.getElementById("big");
              if (parseInt(num) == 1) {
                bigpic.src = "images/MondayNightfb.jpg";
                bigpic.alt = "Monday Night football";
              }
              else if (parseInt(num) == 2) {
                bigpic.src = "images/FolwellHall.jfif";
                bigpic.alt = "Spanish";
              }
              else if (parseInt(num) == 3) {
                bigpic.src = "images/BlazePizza.jpg";
                bigpic.alt = "Blaze Pizza";
              }
              else if (parseInt(num) == 4) {
                bigpic.src = "images/RecWell.jpg";
                bigpic.alt = "RecWell";
              }
              else if (parseInt(num) == 5) {
                bigpic.src = "images/Wahu.jpg";
                bigpic.alt = "Wahu";
              }
              else if (parseInt(num) == 6) {
                bigpic.src = "images/Caribou.jpg";
                bigpic.alt = "Caribou Coffee";
              }
              else if (parseInt(num) == 7) {
                bigpic.src = "images/HellsKitchen.jpg";
                bigpic.alt = "Hells Kitchen";
              }
              else if (parseInt(num) == 8) {
                bigpic.src = "images/LifetimeFitness.jpg";
                bigpic.alt = "Life Time";
              }
          }    



          // transition for images with button 



        function changeImage(event){
            var myimg = document.getElementById("big");
            var btn = document.getElementById('logoButton');
            myimg.classList.toggle('fade');
            if (btn.innerText == "Hide"){
                btn.innerText = "Show";
            }
            else{
                btn.innerText = "Hide";
            }
        }



        //   stuff for map 

        var map;
        var directionsService;
        var directionsRenderer;
        var currentLocation;
        var userLocation;

        function initMap() {

            // instantiating map

            var myLatLng = {lat: 44.977276, lng: -93.232266};

            map = new google.maps.Map(document.getElementById('map'), {
                center: myLatLng,
                zoom: 14
            });


            // Create an object to store the markers by latitude/longitude


            var geocoder = new google.maps.Geocoder(); // Create a geocoder object

            var table = document.getElementById('schedule-table');

            for(var i = 1; i < 7; i++){

                var cells = table.rows.item(i).cells;

                const day = cells.item(0).innerHTML;
                const name = cells.item(1).innerHTML;
                const time = cells.item(2).innerHTML;
                const address = cells.item(3).innerText;


                // getting address using geocode

                geocoder.geocode({ 'address': address }, function(results, status) {
                    if (status == 'OK') {
                        var location = results[0].geometry.location;
                        var latitude = location.lat();
                        var longitude = location.lng();
                        createMarker(day, name, time, address, map, latitude, longitude);
                    } else {
                        console.log('Geocode was not successful for the following reason: ' + status);
                    }
                    });

            }


            // getting users location

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                userLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                });
            } 


        }


        function createMarker(day, eventName, time, address, map, latitude, longitude) {

            var icon = {
                url: "./images/Goldy.png"
                };
            icon.scaledSize = new google.maps.Size(35, 35);

            var marker = new google.maps.Marker({
                    position: {lat: latitude, lng: longitude},
                    map: map,
                    title: eventName,
                    icon: icon
                    });


            // creating an info window for the marker

            var myContent = eventName + "<br>" + day + " " + time + "<br>" + address;

            var myInfowindow = new google.maps.InfoWindow({
                    content: myContent
                    });

                    marker.addListener('click', function() {
                        myInfowindow.open(map, marker);
                    });
        }



        function calculateRoute() {

            // var geocoder = new google.maps.Geocoder();

  
            console.log(userLocation);


            var mode = document.querySelector('input[name="mode"]:checked').value;
            var destination = document.getElementById('destination').value;

            // calculating address 

  
             var actualAddress;

            var directionsService = new google.maps.DirectionsService();
            var directionsRenderer = new google.maps.DirectionsRenderer({map: map});

            directionsService.route({
                origin: userLocation,
                destination: destination,
                travelMode: mode
            }, function(response, status) {
                if (status === 'OK') {
                directionsRenderer.setDirections(response);
                } else {
                // Handle error
                }
            });
            
        }


        function getLocation(destination) {

            var geocoder = new google.maps.Geocoder();

            geocoder.geocode(destination, function(err, data) {
            if (err) {
                console.log(err);
            } else {
                console.log(data.results[0].formatted_address);
                // Save the latitude and longitude of the location for later use
                const lat = data.results[0].geometry.location.lat;
                const lng = data.results[0].geometry.location.lng;
                const actualAddress = new google.maps.LatLng(lat, lng);
                return actualAddress;
                
            }
            });
        }

      </script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKV_ZWS2vXsELohIbIxE_Liqf0msc0W2U&libraries=places&callback=initMap" async defer></script>


</head>

<body>


    <header>
        <nav>
          <ul class="navbar">
            <li class="navbarli"><a href="AboutMe.html">About Me</a></li>
            <li class="navbarli"><a href="MySchedule.html">Schedule</a></li>
            <li class="navbarli"><a href="MyForm.html">Form</a></li>
          </ul>
        </nav>
      </header>


    <div>
        <h1 class="title"> My Schedule</h1>
    </div>

    <div class="wrapper">
        <table id="schedule-table">
            <tr>
                <th>Day</th>
                <th>Event</th>
                <th>Time</th>
                <th>Location</th>
                <th>Phone Number</th>
                <th>URL</th>
            </tr>
            <tr onmouseover="showBigPic(1)">
                <td>Monday</td>
                <td class="event-name">Watch Football with roommate</td>
                <td class="event-time">7:00 PM - 9:00 PM</td>
                <td class="event-location">1016 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/MondayNightfb.jpg" alt="Monday Night football">
                </td>
                <td>612-984-1048</td>
                <td><a href="https://www.nfl.com/schedules/monday-night-football/">Monday Night Football</a></td>
            </tr>
            <tr onmouseover="showBigPic(2)">
                <td>Tuesday</td>
                <td class="event-name">Spanish Class</td>
                <td class="event-time">4:00 PM - 5:15 PM</td>
                <td class="event-location">Folwell Hall, Pleasant St SE, Minneapolis, MN 55455
                    <img src="images/FolwellHall.jfif" alt="Spanish">
                </td>
                <td>612-984-1048</td>
                <td><a href="https://cla.umn.edu/spanish-portuguese">Spanish UMN</a></td>
            </tr>
            <tr onmouseover="showBigPic(3)">
                <td>Wednesday</td>
                <td class="event-name">Dinner with friend at pizza place</td>
                <td class="event-time">6:00 PM - 7:15 PM</td>
                <td class="event-location">1000 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/BlazePizza.jpg" alt="Blaze Pizza">
                </td>
                <td>(612) 295-0835</td>
                <td><a href="https://www.blazepizza.com/?utm_source=gmb&utm_medium=yext">Blaze Pizza</a></td>
            </tr>
            <tr onmouseover="showBigPic(4)">
                <td>Thursday</td>
                <td class="event-name">Workout at the Rec</td>
                <td class="event-time">6:00 PM - 7:30 PM</td>
                <td class="event-location">123 SE Harvard St, Minneapolis, MN 55455
                    <img src="images/RecWell.jpg" alt="RecWell">
                </td>
                <td>(612) 626-9222</td>
                <td><a href="https://recwell.umn.edu/">RecWell</a></td>
            </tr>
            <tr onmouseover="showBigPic(5)">
                <td>Friday</td>
                <td class="event-name">Party with friends at my Apartment</td>
                <td class="event-time">8:00 PM - 12:00 AM</td>
                <td class="event-location">1016 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/Wahu.jpg" alt="Wahu">
                </td>
                <td>(952) 208-9101</td>
                <td><a href="https://www.liveatwahu.com/?y_source=1_MTMxMDg4MjEtNzE1LWxvY2F0aW9uLndlYnNpdGU%3D">Wahu</a></td>
            </tr>
            <tr onmouseover="showBigPic(6)">
                <td>Saturday</td>
                <td class="event-name">Coffee and Breakfast with friends at Caribou</td>
                <td class="event-time">10:00 AM - 11:00 AM</td>
                <td class="event-location">917 Washington Ave SE, Minneapolis, MN 55414
                    <img src="images/Caribou.jpg" alt="Caribou Coffee">
                </td>
                <td>(612) 331-4121</td>
                <td><a href="https://locations.cariboucoffee.com/us/mn/minneapolis/917-washington-avenue-se">Caribou Coffee</a></td>
            </tr>
            <tr onmouseover="showBigPic(7)">
                <td>Saturday</td>
                <td class="event-name">Dinner with Dad at Hell's Kitchen</td>
                <td class="event-time">6:00 PM - 7:00 PM</td>
                <td class="event-location">80 S 9th St, Minneapolis, MN 55402
                    <img src="images/HellsKitchen.jpg" alt="Hells Kitchen">
                </td>
                <td>(612) 332-4700</td>
                <td><a href="https://www.hellskitcheninc.com/">Hell's Kitchen</a></td>
            </tr>
            <tr onmouseover="showBigPic(8)">
                <td>Sunday</td>
                <td class="event-name">Workout and dinner with Mom at Life Time</td>
                <td class="event-time">5:30 PM - 8:30 PM</td>
                <td class="event-location">3600 Plymouth Blvd, Plymouth, MN 55446
                    <img src="images/LifetimeFitness.jpg" alt="Life Time">
                </td>
                <td>763-509-0909</td>
                <td><a href="https://my.lifetime.life/clubs/mn/plymouth/services/lifecafe/menu.html">Life Time menu</a></td>
            </tr>
        </table>

        <div id="big-images">
            <button onclick="changeImage()" id="logoButton">Hide</button>
            <img src="images/gophers-mascot.png" alt="" id="big" >
        </div>
    </div>

            <!-- map -->



        <div id="map"></div>

       <div class="">
            <label for="destination">Destination:</label>
            <input name="destination" type="text" id="destination" >   
            <label for="mode">Mode of transportation:</label>
            <label for="driving"> Driving</label><input type="radio" name="mode" value='DRIVING' id="driving" checked> 
            <label> Walking</label>
            <input type="radio" name="mode" value='WALKING'> 
            <label> Public transport</label>
            <input type="radio" name="mode" value='TRANSIT'> 
            <button type="button" onclick="calculateRoute()">Go</button>

        </div>
            
    
</body>
</html>